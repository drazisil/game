!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){const{Game:s}=i(1),a=new s;window.onload=a.init()},function(e,t){class i{constructor(e,t,i,s,a,n,h){this.name=e,this.data=t,this.x=i,this.y=s,this.hidden=a,this.width=n,this.height=h}}class s{constructor(e,t,i,s){this.x=e,this.y=t,this.height=i,this.source=s}}e.exports={GameObject:i,Missile:s,Game:class{constructor(){this.containerId="game",this.gameObjects={enemies:[]},this.gameConfig={movementUnit:5,width:800,height:600,enemyMissileInterval:120,shipMissileInterval:20,missileLength:20,defaultShipLocation:{x:100,y:400},defaultSpaceLocation:{x:-1e3,y:-1e3}},this.gameState={spaceLocation:{x:-500,y:-500},missiles:[],frameRequest:0,isRunning:!1,enemyMissileTimer:60,shipMissileTimer:60,keys:[]}}areEnemiesLoaded(){return this.gameObjects.enemies[0].data.complete}resetGame(){const{enemies:e,ship:t}=this.gameObjects;t.x=this.gameConfig.defaultShipLocation.x,t.y=this.gameConfig.defaultShipLocation.y,this.gameState.spaceLocation.x=this.gameConfig.defaultSpaceLocation.x,this.gameState.spaceLocation.y=this.gameConfig.defaultSpaceLocation.y,e.map(e=>{e.hidden=!1}),document.getElementById("winScreen").style.visibility="hidden",this.gameState.missiles=[],t.hidden=!1,document.getElementById("loseScreen").style.visibility="hidden",document.getElementById("newGameScreen").style.visibility="visible"}resetSizes(){const{ship:e,enemies:t}=this.gameObjects;0===e.width&&(e.width=e.data.width/2),0===e.height&&(e.height=e.data.height/2),0===t[0].width&&(t[0].width=t[0].data.width/4),0===t[0].height&&(t[0].height=t[0].data.height/4)}isGameLoaded(){return this.gameObjects==={}?(console.error("Empty gameObject in gameLoop"),this.gameState.frameRequest=window.requestAnimationFrame(run),!1):!!(this.gameObjects.space.complete&&this.gameObjects.ship.data.complete&&this.areEnemiesLoaded())&&(this.resetSizes(),document.getElementById("loadingScreen").style.visibility="hidden",this.gameState.loaded=!0,!0)}addMissile(e,t,i){const{shipMissileTimer:a,enemyMissileTimer:n,missiles:h,isRunning:m}=this.gameState,{missileLength:o,shipMissileInterval:g,enemyMissileInterval:c}=this.gameConfig;m&&("ship"===i&&a>=0||"enemy"===i&&n>=0||(this.gameState.missiles.push(new s(e,t,o,i)),this.gameState.shipMissileTimer=g,this.gameState.enemyMissileTimer=c))}removeMissile(e){this.gameState.missiles=this.gameState.missiles.filter(t=>t.y!==e)}moveMissileUp(e){e.y<=0&&this.removeMissile(e.y),e.y-=5}moveMissileDown(e){e.y>=this.gameConfig.height&&this.removeMissile(e.y),e.y+=5}moveMissile(e){"ship"===e.source&&this.moveMissileUp(e),"enemy"===e.source&&this.moveMissileDown(e)}drawMissile(e){const{ctx:t}=this.gameState;"ship"===e.source&&(t.strokeStyle="red"),"enemy"===e.source&&(t.strokeStyle="blue"),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x,e.y-e.height),t.lineWidth=2,t.stroke()}moveUp(){this.gameObjects.ship.y-this.gameConfig.movementUnit<this.gameConfig.height-this.gameConfig.height/2||(this.gameObjects.ship.y=this.gameObjects.ship.y-this.gameConfig.movementUnit,this.gameState.spaceLocation.y=this.gameState.spaceLocation.y-this.gameConfig.movementUnit/2)}moveDown(){this.gameObjects.ship.y+this.gameObjects.ship.height+this.gameConfig.movementUnit>this.gameConfig.height||(this.gameObjects.ship.y=this.gameObjects.ship.y+this.gameConfig.movementUnit,this.gameState.spaceLocation.y=this.gameState.spaceLocation.y+this.gameConfig.movementUnit/2)}moveLeft(){this.gameObjects.ship.x-this.gameConfig.movementUnit<0||(this.gameObjects.ship.x=this.gameObjects.ship.x-this.gameConfig.movementUnit,this.gameState.spaceLocation.x=this.gameState.spaceLocation.x-this.gameConfig.movementUnit/2)}moveRight(){this.gameObjects.ship.x+this.gameObjects.ship.width+this.gameConfig.movementUnit>this.gameConfig.width||(this.gameObjects.ship.x=this.gameObjects.ship.x+this.gameConfig.movementUnit,this.gameState.spaceLocation.x=this.gameState.spaceLocation.x+this.gameConfig.movementUnit/2)}keysPressed(e){switch(e.code){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Space":case"Escape":case"Enter":e.preventDefault()}this.gameState.keys[e.code]=!0}keysReleased(e){this.gameState.keys[e.code]=!1}handleKeys(){const{ship:e}=this.gameObjects,{keys:t,isRunning:i}=this.gameState;if(t.ArrowRight){if(!i)return;this.moveRight()}if(t.ArrowLeft){if(!i)return;this.moveLeft()}if(t.ArrowUp){if(!i)return;this.moveUp()}if(t.ArrowDown){if(!i)return;this.moveDown()}if(t.Space){if(!i)return;this.addMissile(e.x+e.width/2,e.y,"ship")}t.Escape&&(t.Escape=!1,this.resetGame()),(t.Enter||t.NumpadEnter)&&(t.Enter=!1,t.NumpadEnter=!1,this.isGameLoaded()&&(document.getElementById("newGameScreen").style.visibility="hidden",this.gameState.isRunning=!0))}drawSpace(){const{ctx:e}=this.gameState;e.clearRect(0,0,this.gameConfig.width,this.gameConfig.height),e.drawImage(this.gameObjects.space,this.gameState.spaceLocation.x,this.gameState.spaceLocation.y,this.gameObjects.space.width/2,this.gameObjects.space.height/2)}drawEnemy(e){if(e.hidden)return;const{ctx:t}=this.gameState;t.drawImage(e.data,e.x,e.y,e.width,e.height)}drawShip(){const{ctx:e}=this.gameState,{ship:t}=this.gameObjects;e.drawImage(t.data,t.x,t.y,t.width,t.height)}isBetween(e,t,i){return e>=t&&e<=i}checkHitEnemy(e,t){t.y-t.height<=e.y&&this.isBetween(t.x,e.x,e.x+e.width)&&(e.hidden=!0)}checkHitShip(e){const{ship:t}=this.gameObjects;e.y-e.height>=t.y&&this.isBetween(e.x,t.x,t.x+t.width)&&(t.hidden=!0)}checkHit(){const{ship:e,enemies:t}=this.gameObjects;t.map(e=>{this.gameState.missiles.map(t=>{"ship"===t.source&&this.checkHitEnemy(e,t),"enemy"===t.source&&this.checkHitShip(t)})}),0===t.filter(e=>!e.hidden).length&&(this.gameState.isRunning=!1,document.getElementById("winScreen").style.visibility="visible"),!0===e.hidden&&(this.gameState.isRunning=!1,document.getElementById("loseScreen").style.visibility="visible")}updateDebug(){document.getElementById("debugMovementUnit").value=this.gameConfig.movementUnit}run(){this.isGameLoaded()?(this.updateDebug(),this.handleKeys(),this.drawSpace(),this.drawShip(),this.drawEnemy(this.gameObjects.enemies[0]),this.gameState.isRunning&&this.gameObjects.enemies.forEach(e=>{this.addMissile(e.x+e.width/2,e.y+e.height+this.gameConfig.missileLength,"enemy")}),this.gameState.missiles.forEach(e=>{this.moveMissile(e)}),this.checkHit(),this.gameState.missiles.forEach(e=>{this.drawMissile(e)}),this.gameState.enemyMissileTimer--,this.gameState.shipMissileTimer--,this.gameState.frameRequest=window.requestAnimationFrame(this.run.bind(this))):this.gameState.frameRequest=window.requestAnimationFrame(this.run.bind(this))}init(){window.addEventListener("keydown",this.keysPressed.bind(this),!1),window.addEventListener("keyup",this.keysReleased.bind(this),!1);const e=document.images[0],t=document.images[2],s=document.images[3],a=document.getElementById(this.containerId),n=document.createElement("canvas");n.setAttribute("id","gameCanvas"),n.setAttribute("width",800),n.setAttribute("height",600),a.appendChild(n),this.gameState.ctx=n.getContext("2d"),this.gameObjects.ship=new i("ship",e,this.gameConfig.defaultShipLocation.x,this.gameConfig.defaultShipLocation.y,"false",e.width/2,e.height/2),this.gameObjects.enemies.push(new i("enemy1",s,100,50,!1,s.width/4,s.height/4)),this.gameObjects.space=t,this.gameState.frameRequest=window.requestAnimationFrame(this.run.bind(this))}}}}]);
//# sourceMappingURL=main.js.map